{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/anthony/PersonalProjects/sympto-street/client/src/components/SearchResults.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport SingleResult from './SingleResult';\nexport default function SearchResults(props) {\n  _s();\n\n  const {\n    searchResults,\n    hasResults,\n    priceSort,\n    setSearchInput\n  } = props;\n  const [resultGrouping, setResultGrouping] = useState({});\n  const [resultsOutput, setResultsOutput] = useState([]);\n\n  const handlePriceSort = e => {\n    const userSelection = e.target.value;\n    setSearchInput(prev => {\n      return { ...prev,\n        priceSort: userSelection\n      };\n    });\n  };\n\n  const scrollToTop = () => {\n    document.getElementById('logoBar').scrollIntoView({\n      behavior: 'smooth'\n    });\n  }; // Set initial grouping (1 group = 10 results/page) when searchResults change\n\n\n  useEffect(() => {\n    const numberOfGroups = Math.round(searchResults.length / 10);\n    let upperRange = searchResults.length;\n    if (1 < numberOfGroups) upperRange = 10;\n    setResultGrouping({\n      groups: numberOfGroups,\n      currentGroup: 1,\n      lowerRange: 1,\n      upperRange\n    });\n  }, [searchResults]); // Generate results based on current group\n\n  useEffect(() => {\n    console.log(searchResults);\n    if (!searchResults) return;\n    let output = [];\n\n    for (let i = resultGrouping.lowerRange - 1; i < resultGrouping.upperRange; i++) {\n      output.push( /*#__PURE__*/_jsxDEV(SingleResult, {\n        result: searchResults[i],\n        index: i\n      }, searchResults[i]._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this));\n    }\n\n    setResultsOutput(output);\n  }, [resultGrouping, searchResults]);\n\n  const generateResultRanges = (currentGroup, groups) => {\n    const resultLowerRange = currentGroup * 10 - 9;\n    const resultUpperRange = currentGroup * 10;\n\n    if (currentGroup < groups) {\n      return [resultLowerRange, resultUpperRange];\n    } else {\n      return [resultLowerRange, searchResults.length];\n    }\n  };\n\n  const handleNavigationClick = e => {\n    scrollToTop();\n    const previousPage = e.target.classList.contains('previousPage');\n    const newGroup = resultGrouping.currentGroup - (previousPage ? 1 : -1);\n    const newResultGroupRanges = generateResultRanges(newGroup, resultGrouping.groups);\n    setResultGrouping(prev => {\n      return { ...prev,\n        currentGroup: newGroup,\n        lowerRange: newResultGroupRanges[0],\n        upperRange: newResultGroupRanges[1]\n      };\n    });\n  };\n\n  const pageNavigationButtons = resultGrouping.groups > 1 ? /*#__PURE__*/_jsxDEV(\"span\", {\n    id: \"resultPageNavIcons\",\n    children: [resultGrouping.currentGroup === 1 ? null : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary m-2 shadow-none previousPage\",\n      onClick: handleNavigationClick,\n      children: \"Prev Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this), resultGrouping.currentGroup === resultGrouping.groups ? null : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary m-2 shadow-none\",\n      onClick: handleNavigationClick,\n      children: \"Next Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this) : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      id: \"searchResultsTitle\",\n      children: [!hasResults ? \"No results, try broadening your search\" : null, searchResults.length === 0 ? null : \"Showing results \" + resultGrouping.lowerRange + \"-\" + resultGrouping.upperRange + \" of \" + searchResults.length, searchResults.length > 1 ? /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"priceSort form-select shadow-none\",\n        value: priceSort,\n        onChange: handlePriceSort,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"ascending\",\n          children: \"Price: Low to High\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"descending\",\n          children: \"Price: High to Low\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), pageNavigationButtons, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-wrap\",\n      children: resultsOutput\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), pageNavigationButtons]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SearchResults, \"JVVFn/h7iQmQoVSJkZWh0wBAt5w=\");\n\n_c = SearchResults;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchResults\");","map":{"version":3,"sources":["/home/anthony/PersonalProjects/sympto-street/client/src/components/SearchResults.js"],"names":["React","useState","useEffect","SingleResult","SearchResults","props","searchResults","hasResults","priceSort","setSearchInput","resultGrouping","setResultGrouping","resultsOutput","setResultsOutput","handlePriceSort","e","userSelection","target","value","prev","scrollToTop","document","getElementById","scrollIntoView","behavior","numberOfGroups","Math","round","length","upperRange","groups","currentGroup","lowerRange","console","log","output","i","push","_id","generateResultRanges","resultLowerRange","resultUpperRange","handleNavigationClick","previousPage","classList","contains","newGroup","newResultGroupRanges","pageNavigationButtons"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAEzC,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA,UAAjB;AAA6BC,IAAAA,SAA7B;AAAwCC,IAAAA;AAAxC,MAA2DJ,KAAjE;AAEA,QAAM,CAAEK,cAAF,EAAkBC,iBAAlB,IAAwCV,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAAEW,aAAF,EAAiBC,gBAAjB,IAAsCZ,QAAQ,CAAC,EAAD,CAApD;;AAEA,QAAMa,eAAe,GAAIC,CAAD,IAAO;AAC3B,UAAMC,aAAa,GAAGD,CAAC,CAACE,MAAF,CAASC,KAA/B;AACAT,IAAAA,cAAc,CAACU,IAAI,IAAI;AACnB,aAAO,EACH,GAAGA,IADA;AAEHX,QAAAA,SAAS,EAAEQ;AAFR,OAAP;AAIH,KALa,CAAd;AAMH,GARD;;AAUA,QAAMI,WAAW,GAAG,MAAM;AACtBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,cAAnC,CAAkD;AAACC,MAAAA,QAAQ,EAAE;AAAX,KAAlD;AACH,GAFD,CAjByC,CAqBzC;;;AACAtB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMuB,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWrB,aAAa,CAACsB,MAAd,GAAqB,EAAhC,CAAvB;AACA,QAAIC,UAAU,GAAGvB,aAAa,CAACsB,MAA/B;AACA,QAAI,IAAIH,cAAR,EAAwBI,UAAU,GAAG,EAAb;AACxBlB,IAAAA,iBAAiB,CAAC;AAACmB,MAAAA,MAAM,EAAEL,cAAT;AAAyBM,MAAAA,YAAY,EAAE,CAAvC;AAA0CC,MAAAA,UAAU,EAAE,CAAtD;AAAyDH,MAAAA;AAAzD,KAAD,CAAjB;AACH,GALQ,EAKN,CAACvB,aAAD,CALM,CAAT,CAtByC,CA6BzC;;AACAJ,EAAAA,SAAS,CAAC,MAAM;AAEZ+B,IAAAA,OAAO,CAACC,GAAR,CAAY5B,aAAZ;AAGA,QAAI,CAACA,aAAL,EAAoB;AAEpB,QAAI6B,MAAM,GAAG,EAAb;;AACA,SAAK,IAAIC,CAAC,GAAG1B,cAAc,CAACsB,UAAf,GAA4B,CAAzC,EAA4CI,CAAC,GAAG1B,cAAc,CAACmB,UAA/D,EAA2EO,CAAC,EAA5E,EAAgF;AAC5ED,MAAAA,MAAM,CAACE,IAAP,eACI,QAAC,YAAD;AAAc,QAAA,MAAM,EAAE/B,aAAa,CAAC8B,CAAD,CAAnC;AAAwC,QAAA,KAAK,EAAEA;AAA/C,SAAuD9B,aAAa,CAAC8B,CAAD,CAAb,CAAiBE,GAAxE;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH;;AACDzB,IAAAA,gBAAgB,CAACsB,MAAD,CAAhB;AACH,GAdQ,EAcN,CAACzB,cAAD,EAAiBJ,aAAjB,CAdM,CAAT;;AAiBA,QAAMiC,oBAAoB,GAAG,CAACR,YAAD,EAAeD,MAAf,KAA0B;AACnD,UAAMU,gBAAgB,GAAGT,YAAY,GAAC,EAAb,GAAgB,CAAzC;AACA,UAAMU,gBAAgB,GAAGV,YAAY,GAAC,EAAtC;;AAEA,QAAIA,YAAY,GAAGD,MAAnB,EAA2B;AACvB,aAAO,CAACU,gBAAD,EAAmBC,gBAAnB,CAAP;AACH,KAFD,MAEO;AACH,aAAO,CAACD,gBAAD,EAAmBlC,aAAa,CAACsB,MAAjC,CAAP;AACH;AACJ,GATD;;AAWA,QAAMc,qBAAqB,GAAI3B,CAAD,IAAO;AACjCK,IAAAA,WAAW;AAEX,UAAMuB,YAAY,GAAG5B,CAAC,CAACE,MAAF,CAAS2B,SAAT,CAAmBC,QAAnB,CAA4B,cAA5B,CAArB;AACA,UAAMC,QAAQ,GAAGpC,cAAc,CAACqB,YAAf,IAA+BY,YAAY,GAAG,CAAH,GAAK,CAAC,CAAjD,CAAjB;AACA,UAAMI,oBAAoB,GAAGR,oBAAoB,CAACO,QAAD,EAAWpC,cAAc,CAACoB,MAA1B,CAAjD;AAEAnB,IAAAA,iBAAiB,CAACQ,IAAI,IAAI;AACtB,aAAO,EACH,GAAGA,IADA;AAEHY,QAAAA,YAAY,EAAEe,QAFX;AAGHd,QAAAA,UAAU,EAAEe,oBAAoB,CAAC,CAAD,CAH7B;AAIHlB,QAAAA,UAAU,EAAEkB,oBAAoB,CAAC,CAAD;AAJ7B,OAAP;AAMH,KAPgB,CAAjB;AAQH,GAfD;;AAiBA,QAAMC,qBAAqB,GACvBtC,cAAc,CAACoB,MAAf,GAAwB,CAAxB,gBACA;AAAM,IAAA,EAAE,EAAC,oBAAT;AAAA,eAEQpB,cAAc,CAACqB,YAAf,KAAgC,CAAhC,GACA,IADA,gBAEA;AACI,MAAA,SAAS,EAAC,8CADd;AAEI,MAAA,OAAO,EAAEW,qBAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJR,EAYQhC,cAAc,CAACqB,YAAf,KAAgCrB,cAAc,CAACoB,MAA/C,GACA,IADA,gBAEA;AACI,MAAA,SAAS,EAAC,iCADd;AAEI,MAAA,OAAO,EAAEY,qBAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAdR;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,GAuBC,IAxBL;AA2BA,sBACI;AAAA,4BACI;AAAI,MAAA,EAAE,EAAC,oBAAP;AAAA,iBACK,CAACnC,UAAD,GAAc,wCAAd,GAAwD,IAD7D,EAGQD,aAAa,CAACsB,MAAd,KAAyB,CAAzB,GACA,IADA,GAEA,qBAAqBlB,cAAc,CAACsB,UAApC,GAAiD,GAAjD,GAAuDtB,cAAc,CAACmB,UAAtE,GAAmF,MAAnF,GAA4FvB,aAAa,CAACsB,MALlH,EAOKtB,aAAa,CAACsB,MAAd,GAAuB,CAAvB,gBACG;AAAQ,QAAA,SAAS,EAAC,mCAAlB;AAAsD,QAAA,KAAK,EAAEpB,SAA7D;AAAwE,QAAA,QAAQ,EAAEM,eAAlF;AAAA,gCACI;AAAQ,UAAA,KAAK,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,UAAA,KAAK,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADH,GAIc,IAXnB;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAgBKkC,qBAhBL,eAkBI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA,gBACKpC;AADL;AAAA;AAAA;AAAA;AAAA,YAlBJ,EAsBKoC,qBAtBL;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA2BH;;GAjIuB5C,a;;KAAAA,a","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport SingleResult from './SingleResult'\n\nexport default function SearchResults(props) {\n\n    const { searchResults, hasResults, priceSort, setSearchInput } = props\n\n    const [ resultGrouping, setResultGrouping ] = useState({})\n    const [ resultsOutput, setResultsOutput ] = useState([])\n    \n    const handlePriceSort = (e) => {\n        const userSelection = e.target.value\n        setSearchInput(prev => {\n            return {\n                ...prev,\n                priceSort: userSelection\n            }\n        })\n    }\n\n    const scrollToTop = () => {\n        document.getElementById('logoBar').scrollIntoView({behavior: 'smooth'})\n    }\n\n    // Set initial grouping (1 group = 10 results/page) when searchResults change\n    useEffect(() => {\n        const numberOfGroups = Math.round(searchResults.length/10)\n        let upperRange = searchResults.length\n        if (1 < numberOfGroups) upperRange = 10 \n        setResultGrouping({groups: numberOfGroups, currentGroup: 1, lowerRange: 1, upperRange})\n    }, [searchResults])\n\n    // Generate results based on current group\n    useEffect(() => {\n        \n        console.log(searchResults)\n        \n\n        if (!searchResults) return\n\n        let output = []\n        for (let i = resultGrouping.lowerRange - 1; i < resultGrouping.upperRange; i++) {\n            output.push(\n                <SingleResult result={searchResults[i]} index={i} key={searchResults[i]._id}/>\n            )\n        }\n        setResultsOutput(output)\n    }, [resultGrouping, searchResults])\n        \n        \n    const generateResultRanges = (currentGroup, groups) => {\n        const resultLowerRange = currentGroup*10-9\n        const resultUpperRange = currentGroup*10\n        \n        if (currentGroup < groups) {\n            return [resultLowerRange, resultUpperRange]\n        } else {\n            return [resultLowerRange, searchResults.length]\n        }\n    }\n\n    const handleNavigationClick = (e) => {\n        scrollToTop()\n        \n        const previousPage = e.target.classList.contains('previousPage')\n        const newGroup = resultGrouping.currentGroup - (previousPage ? 1:-1)\n        const newResultGroupRanges = generateResultRanges(newGroup, resultGrouping.groups)\n\n        setResultGrouping(prev => {\n            return {\n                ...prev,\n                currentGroup: newGroup,\n                lowerRange: newResultGroupRanges[0],\n                upperRange: newResultGroupRanges[1],\n            }\n        })\n    }\n\n    const pageNavigationButtons = (\n        resultGrouping.groups > 1 ? \n        <span id=\"resultPageNavIcons\">\n            {\n                resultGrouping.currentGroup === 1 ? \n                null:\n                <button \n                    className=\"btn btn-primary m-2 shadow-none previousPage\" \n                    onClick={handleNavigationClick}\n                >\n                    Prev Page\n                </button>\n            }\n            {\n                resultGrouping.currentGroup === resultGrouping.groups ? \n                null:\n                <button \n                    className=\"btn btn-primary m-2 shadow-none\" \n                    onClick={handleNavigationClick}\n                >\n                    Next Page\n                </button>\n            }\n        </span>\n        :null\n    )\n\n    return (\n        <div>\n            <h3 id=\"searchResultsTitle\">\n                {!hasResults ? \"No results, try broadening your search\": null}\n                {\n                    searchResults.length === 0 ? \n                    null:\n                    \"Showing results \" + resultGrouping.lowerRange + \"-\" + resultGrouping.upperRange + \" of \" + searchResults.length\n                }\n                {searchResults.length > 1 ? \n                    <select className=\"priceSort form-select shadow-none\" value={priceSort} onChange={handlePriceSort}>\n                        <option value=\"ascending\">Price: Low to High</option>\n                        <option value=\"descending\">Price: High to Low</option>\n                    </select>: null\n                }\n            </h3>\n\n            {pageNavigationButtons}\n\n            <div className=\"d-flex flex-wrap\">\n                {resultsOutput}\n            </div>\n            \n            {pageNavigationButtons}\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}